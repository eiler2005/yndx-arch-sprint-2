<mxfile host="drawio-plugin" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36" modified="2024-10-26T12:52:13.821Z" version="22.1.22" etag="xF5iJPTqSrol3RJvijea" type="embed" pages="2">
  <diagram name="Задание 5" id="1a2thrRxbPmIyu8-sEVz">
    <mxGraphModel dx="1620" dy="1570" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="ffho7K6KGjX7ke_WBKRF-3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fillColor=#cdeb8b;strokeColor=#36393d;shadow=0;gradientColor=none;opacity=60;" parent="1" vertex="1">
          <mxGeometry x="-375" y="-41.25" width="230" height="352.5" as="geometry" />
        </mxCell>
        <mxCell id="a9j5l-_4lfB5BvysGYS4-37" value="" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fillColor=#fff2cc;strokeColor=#d6b656;shadow=0;" parent="1" vertex="1">
          <mxGeometry x="260" y="-130" width="470" height="490" as="geometry" />
        </mxCell>
        <mxCell id="GK1FG8dtGfqj12xNYv7O-7" value="Task 5" style="text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;" parent="1" vertex="1">
          <mxGeometry x="-800" y="-380" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="GK1FG8dtGfqj12xNYv7O-9" value="" style="line;strokeWidth=2;html=1;" parent="1" vertex="1">
          <mxGeometry x="-790" y="-340" width="160" height="10" as="geometry" />
        </mxCell>
        <mxCell id="GK1FG8dtGfqj12xNYv7O-10" value="pymongo-api" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-320" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GK1FG8dtGfqj12xNYv7O-29" value="configSrv&lt;br&gt;(metadata for sharding)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="270" y="-50" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GK1FG8dtGfqj12xNYv7O-50" value="Mongos router" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=2;shape=mxgraph.arrows2.arrow;dy=0.6;dx=40;notch=0;" parent="1" vertex="1">
          <mxGeometry x="280" y="225" width="100" height="70" as="geometry" />
        </mxCell>
        <mxCell id="GK1FG8dtGfqj12xNYv7O-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="GK1FG8dtGfqj12xNYv7O-52" target="GK1FG8dtGfqj12xNYv7O-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="760" y="115" as="sourcePoint" />
            <mxPoint x="560" y="155" as="targetPoint" />
            <Array as="points">
              <mxPoint x="500" y="130" />
              <mxPoint x="160" y="130" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="GK1FG8dtGfqj12xNYv7O-51" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;MongDB (c replica)&lt;div&gt;shard11&lt;/div&gt;&lt;div&gt;shard12&lt;/div&gt;&lt;div&gt;shard13&lt;br&gt;&lt;/div&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="550" y="-20" width="130" height="110" as="geometry" />
        </mxCell>
        <mxCell id="GK1FG8dtGfqj12xNYv7O-52" value="&lt;div&gt;&lt;br class=&quot;Apple-interchange-newline&quot;&gt;&lt;br&gt;&lt;/div&gt;MongDB (c replica)&lt;div&gt;shard21&lt;/div&gt;&lt;div&gt;shard22&lt;/div&gt;&lt;div&gt;shard23&lt;/div&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="550" y="140" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="GK1FG8dtGfqj12xNYv7O-54" value="Балансировка" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="GK1FG8dtGfqj12xNYv7O-50" target="GK1FG8dtGfqj12xNYv7O-51" edge="1">
          <mxGeometry x="0.44" y="-20" relative="1" as="geometry">
            <mxPoint as="offset" />
            <mxPoint x="360" y="214.5" as="sourcePoint" />
            <mxPoint x="700" y="69.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GK1FG8dtGfqj12xNYv7O-55" value="Балансировка" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="GK1FG8dtGfqj12xNYv7O-50" target="GK1FG8dtGfqj12xNYv7O-52" edge="1">
          <mxGeometry x="0.4483" y="-10" relative="1" as="geometry">
            <mxPoint as="offset" />
            <mxPoint x="550" y="370" as="sourcePoint" />
            <mxPoint x="720" y="295" as="targetPoint" />
            <Array as="points">
              <mxPoint x="460" y="260" />
              <mxPoint x="460" y="275" />
              <mxPoint x="620" y="275" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="GK1FG8dtGfqj12xNYv7O-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="GK1FG8dtGfqj12xNYv7O-51" target="GK1FG8dtGfqj12xNYv7O-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="20" as="sourcePoint" />
            <mxPoint x="170" y="60" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="a9j5l-_4lfB5BvysGYS4-38" value="Кластер Mongo DB" style="text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;" parent="1" vertex="1">
          <mxGeometry x="410" y="-130" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="a9j5l-_4lfB5BvysGYS4-40" value="Настройки shard1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="420" y="-60" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="a9j5l-_4lfB5BvysGYS4-41" value="Настройки shard2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="330" y="90" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="a9j5l-_4lfB5BvysGYS4-42" value="данные по кластеру" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="290" y="140" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="a9j5l-_4lfB5BvysGYS4-44" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;entryX=0.342;entryY=1.033;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0;exitDx=30;exitDy=21;exitPerimeter=0;" parent="1" source="GK1FG8dtGfqj12xNYv7O-50" target="GK1FG8dtGfqj12xNYv7O-29" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="300" as="sourcePoint" />
            <mxPoint x="470" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="a9j5l-_4lfB5BvysGYS4-48" value="" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="-80" y="155" width="250" height="260" as="geometry" />
        </mxCell>
        <mxCell id="a9j5l-_4lfB5BvysGYS4-50" value="&lt;div&gt;redis-sentinel&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-70" y="263" width="80" height="42" as="geometry" />
        </mxCell>
        <mxCell id="a9j5l-_4lfB5BvysGYS4-52" value="Redis (кеш)" style="text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;" parent="1" vertex="1">
          <mxGeometry x="-50" y="165" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="a9j5l-_4lfB5BvysGYS4-55" value="&lt;div&gt;redis-master&lt;/div&gt;&lt;div&gt;slave1&lt;/div&gt;&lt;div&gt;slave2&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="210" width="80" height="130" as="geometry" />
        </mxCell>
        <mxCell id="a9j5l-_4lfB5BvysGYS4-56" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="10" y="284.5" as="sourcePoint" />
            <mxPoint x="70" y="285" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="a9j5l-_4lfB5BvysGYS4-57" value="Мониторинг" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-30" y="365" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="a9j5l-_4lfB5BvysGYS4-58" value="" style="endArrow=none;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="a9j5l-_4lfB5BvysGYS4-57" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="30" y="285" as="sourcePoint" />
            <mxPoint x="90" y="315" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="dGxykZIHPtwFSYAwNecW-1" value="Или же из кеша (если он не пустой)" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-80" y="120" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dGxykZIHPtwFSYAwNecW-2" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" parent="1" target="a9j5l-_4lfB5BvysGYS4-48" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="108" y="115" as="sourcePoint" />
            <mxPoint x="320" y="265" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-1" value="pymongo-api" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-320" y="117.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-2" value="pymongo-api" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-320" y="205" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-4" value="&lt;span style=&quot;font-size: 11px; text-wrap: nowrap; background-color: rgb(255, 255, 255);&quot;&gt;Получить данные&amp;nbsp;&lt;/span&gt;&lt;div style=&quot;font-size: 11px; text-wrap: nowrap;&quot;&gt;из хранилища&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="20" y="72.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-5" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.996;exitY=0.445;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ffho7K6KGjX7ke_WBKRF-3" target="a9j5l-_4lfB5BvysGYS4-37" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-110" y="130" as="sourcePoint" />
            <mxPoint x="-60" y="80" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-6" value="сonsul&lt;div&gt;Service Discovery&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-470" y="-160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-7" value="API Gateway" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-640" y="110" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-9" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-520" y="140" as="sourcePoint" />
            <mxPoint x="-380" y="140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-10" value="&lt;span style=&quot;font-size: 11px; text-wrap: nowrap; background-color: rgb(255, 255, 255);&quot;&gt;Балансировка&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-480" y="100" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-11" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.543;exitY=0.004;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="ffho7K6KGjX7ke_WBKRF-3" target="ffho7K6KGjX7ke_WBKRF-12" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-250" y="-50" as="sourcePoint" />
            <mxPoint x="50" y="-40" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-12" value="&lt;span style=&quot;text-wrap: nowrap; background-color: rgb(255, 255, 255);&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Регистрация&lt;/font&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-280" y="-145" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-13" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="ffho7K6KGjX7ke_WBKRF-6" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-300" y="-130" as="sourcePoint" />
            <mxPoint x="-80" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-26" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.558;exitY=-0.017;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ffho7K6KGjX7ke_WBKRF-7" target="ffho7K6KGjX7ke_WBKRF-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-170" y="100" as="sourcePoint" />
            <mxPoint x="-70" y="100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-27" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Получение данных о активных&amp;nbsp;&lt;/font&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;экземплярах&lt;/font&gt;&lt;/div&gt;" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" parent="ffho7K6KGjX7ke_WBKRF-26" connectable="0" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ffho7K6KGjX7ke_WBKRF-29" value="Экземпляры приложения&lt;div&gt;pymongo - api (1...n)&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="-360" y="-30" width="190" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram name="Задание 6" id="aBwct9xh-ylsT90Gkfry">
    <mxGraphModel dx="1620" dy="1570" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="ZHfsRG2pBrrOl4awrow--0" />
        <mxCell id="ZHfsRG2pBrrOl4awrow--1" parent="ZHfsRG2pBrrOl4awrow--0" />
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-0" value="" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fillColor=#cdeb8b;strokeColor=#36393d;shadow=0;gradientColor=none;opacity=60;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-375" y="-41.25" width="230" height="352.5" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fillColor=#fff2cc;strokeColor=#d6b656;shadow=0;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="260" y="-130" width="470" height="490" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-2" value="Task 6" style="text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-800" y="-380" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-3" value="" style="line;strokeWidth=2;html=1;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-790" y="-340" width="160" height="10" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-4" value="pymongo-api" style="rounded=1;whiteSpace=wrap;html=1;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-320" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-5" value="configSrv&lt;br&gt;(metadata for sharding)" style="rounded=1;whiteSpace=wrap;html=1;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="270" y="-50" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-6" value="Mongos router" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;strokeWidth=2;shape=mxgraph.arrows2.arrow;dy=0.6;dx=40;notch=0;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="280" y="225" width="100" height="70" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZHfsRG2pBrrOl4awrow--1" source="0IQUrDeqA6G0DRsf7lnD-9" target="0IQUrDeqA6G0DRsf7lnD-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="760" y="115" as="sourcePoint" />
            <mxPoint x="560" y="155" as="targetPoint" />
            <Array as="points">
              <mxPoint x="500" y="130" />
              <mxPoint x="160" y="130" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-8" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;MongDB (c replica)&lt;div&gt;shard11&lt;/div&gt;&lt;div&gt;shard12&lt;/div&gt;&lt;div&gt;shard13&lt;br&gt;&lt;/div&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="550" y="-20" width="130" height="110" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-9" value="&lt;div&gt;&lt;br class=&quot;Apple-interchange-newline&quot;&gt;&lt;br&gt;&lt;/div&gt;MongDB (c replica)&lt;div&gt;shard21&lt;/div&gt;&lt;div&gt;shard22&lt;/div&gt;&lt;div&gt;shard23&lt;/div&gt;" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="550" y="140" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-10" value="Балансировка" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="ZHfsRG2pBrrOl4awrow--1" source="0IQUrDeqA6G0DRsf7lnD-6" target="0IQUrDeqA6G0DRsf7lnD-8" edge="1">
          <mxGeometry x="0.44" y="-20" relative="1" as="geometry">
            <mxPoint as="offset" />
            <mxPoint x="360" y="214.5" as="sourcePoint" />
            <mxPoint x="700" y="69.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-11" value="Балансировка" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZHfsRG2pBrrOl4awrow--1" source="0IQUrDeqA6G0DRsf7lnD-6" target="0IQUrDeqA6G0DRsf7lnD-9" edge="1">
          <mxGeometry x="0.4483" y="-10" relative="1" as="geometry">
            <mxPoint as="offset" />
            <mxPoint x="550" y="370" as="sourcePoint" />
            <mxPoint x="720" y="295" as="targetPoint" />
            <Array as="points">
              <mxPoint x="460" y="260" />
              <mxPoint x="460" y="275" />
              <mxPoint x="620" y="275" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZHfsRG2pBrrOl4awrow--1" source="0IQUrDeqA6G0DRsf7lnD-8" target="0IQUrDeqA6G0DRsf7lnD-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="370" y="20" as="sourcePoint" />
            <mxPoint x="170" y="60" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-13" value="Кластер Mongo DB" style="text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="410" y="-130" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-14" value="Настройки shard1" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="420" y="-60" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-15" value="Настройки shard2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="330" y="90" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-16" value="данные по кластеру" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="290" y="140" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-17" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;entryX=0.342;entryY=1.033;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0;exitDx=30;exitDy=21;exitPerimeter=0;" parent="ZHfsRG2pBrrOl4awrow--1" source="0IQUrDeqA6G0DRsf7lnD-6" target="0IQUrDeqA6G0DRsf7lnD-5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="420" y="300" as="sourcePoint" />
            <mxPoint x="470" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-18" value="" style="rounded=1;whiteSpace=wrap;html=1;fillStyle=auto;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-80" y="155" width="250" height="260" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-19" value="&lt;div&gt;redis-sentinel&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-70" y="263" width="80" height="42" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-20" value="Redis (кеш)" style="text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-50" y="165" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-21" value="&lt;div&gt;redis-master&lt;/div&gt;&lt;div&gt;slave1&lt;/div&gt;&lt;div&gt;slave2&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="70" y="210" width="80" height="130" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-22" value="" style="endArrow=classic;html=1;rounded=0;" parent="ZHfsRG2pBrrOl4awrow--1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="10" y="284.5" as="sourcePoint" />
            <mxPoint x="70" y="285" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-23" value="Мониторинг" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-30" y="365" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-24" value="" style="endArrow=none;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="ZHfsRG2pBrrOl4awrow--1" target="0IQUrDeqA6G0DRsf7lnD-23" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="30" y="285" as="sourcePoint" />
            <mxPoint x="90" y="315" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-25" value="Или же из кеша (если он не пустой)" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-80" y="120" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-26" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" parent="ZHfsRG2pBrrOl4awrow--1" target="0IQUrDeqA6G0DRsf7lnD-18" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="108" y="115" as="sourcePoint" />
            <mxPoint x="320" y="265" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-27" value="pymongo-api" style="rounded=1;whiteSpace=wrap;html=1;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-320" y="117.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-28" value="pymongo-api" style="rounded=1;whiteSpace=wrap;html=1;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-320" y="205" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-29" value="&lt;span style=&quot;font-size: 11px; text-wrap: nowrap; background-color: rgb(255, 255, 255);&quot;&gt;Получить данные&amp;nbsp;&lt;/span&gt;&lt;div style=&quot;font-size: 11px; text-wrap: nowrap;&quot;&gt;из хранилища&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="20" y="72.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-30" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.996;exitY=0.445;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="ZHfsRG2pBrrOl4awrow--1" source="0IQUrDeqA6G0DRsf7lnD-0" target="0IQUrDeqA6G0DRsf7lnD-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-110" y="130" as="sourcePoint" />
            <mxPoint x="-60" y="80" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-31" value="сonsul&lt;div&gt;Service Discovery&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-470" y="-160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-32" value="API Gateway" style="rounded=1;whiteSpace=wrap;html=1;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-640" y="110" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-33" value="" style="endArrow=classic;html=1;rounded=0;" parent="ZHfsRG2pBrrOl4awrow--1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-520" y="140" as="sourcePoint" />
            <mxPoint x="-380" y="140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-34" value="&lt;span style=&quot;font-size: 11px; text-wrap: nowrap; background-color: rgb(255, 255, 255);&quot;&gt;Балансировка&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-480" y="100" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-35" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.543;exitY=0.004;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZHfsRG2pBrrOl4awrow--1" source="0IQUrDeqA6G0DRsf7lnD-0" target="0IQUrDeqA6G0DRsf7lnD-36" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-250" y="-50" as="sourcePoint" />
            <mxPoint x="50" y="-40" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-36" value="&lt;span style=&quot;text-wrap: nowrap; background-color: rgb(255, 255, 255);&quot;&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Регистрация&lt;/font&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-280" y="-145" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-37" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="ZHfsRG2pBrrOl4awrow--1" target="0IQUrDeqA6G0DRsf7lnD-31" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-300" y="-130" as="sourcePoint" />
            <mxPoint x="-80" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-38" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.558;exitY=-0.017;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="ZHfsRG2pBrrOl4awrow--1" source="0IQUrDeqA6G0DRsf7lnD-32" target="0IQUrDeqA6G0DRsf7lnD-31" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-170" y="100" as="sourcePoint" />
            <mxPoint x="-70" y="100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-39" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Получение данных о активных&amp;nbsp;&lt;/font&gt;&lt;div&gt;&lt;font size=&quot;3&quot;&gt;экземплярах&lt;/font&gt;&lt;/div&gt;" style="edgeLabel;resizable=0;html=1;;align=center;verticalAlign=middle;" parent="0IQUrDeqA6G0DRsf7lnD-38" connectable="0" vertex="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="0IQUrDeqA6G0DRsf7lnD-40" value="Экземпляры приложения&lt;div&gt;pymongo - api (1...n)&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-360" y="-30" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="eiYmDDhU-9cQz6B6CtoI-0" value="CDN" style="rounded=1;whiteSpace=wrap;html=1;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-770" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eiYmDDhU-9cQz6B6CtoI-1" value="CDN" style="rounded=1;whiteSpace=wrap;html=1;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-623" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eiYmDDhU-9cQz6B6CtoI-2" value="CDN" style="rounded=1;whiteSpace=wrap;html=1;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-480" y="340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="eiYmDDhU-9cQz6B6CtoI-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZHfsRG2pBrrOl4awrow--1" source="eiYmDDhU-9cQz6B6CtoI-6" target="eiYmDDhU-9cQz6B6CtoI-0" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eiYmDDhU-9cQz6B6CtoI-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="ZHfsRG2pBrrOl4awrow--1" source="eiYmDDhU-9cQz6B6CtoI-6" target="eiYmDDhU-9cQz6B6CtoI-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="eiYmDDhU-9cQz6B6CtoI-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="ZHfsRG2pBrrOl4awrow--1" source="eiYmDDhU-9cQz6B6CtoI-6" target="eiYmDDhU-9cQz6B6CtoI-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-563" y="470" />
              <mxPoint x="-420" y="470" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="eiYmDDhU-9cQz6B6CtoI-6" value="Actor" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-578" y="540" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ZqQhT5V9Va-E0aHPYchP-1" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="ZHfsRG2pBrrOl4awrow--1" target="0IQUrDeqA6G0DRsf7lnD-32" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-580" y="280" as="sourcePoint" />
            <mxPoint x="-160" y="190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="ZqQhT5V9Va-E0aHPYchP-2" value="" style="endArrow=none;html=1;rounded=0;" parent="ZHfsRG2pBrrOl4awrow--1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-720" y="283.5" as="sourcePoint" />
            <mxPoint x="-440" y="283.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JGtitcx2gDCJm6_vyVpp-0" value="" style="endArrow=none;html=1;rounded=0;exitX=0.442;exitY=-0.017;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZHfsRG2pBrrOl4awrow--1" source="eiYmDDhU-9cQz6B6CtoI-0" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-300" y="300" as="sourcePoint" />
            <mxPoint x="-717" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JGtitcx2gDCJm6_vyVpp-1" value="" style="endArrow=none;html=1;rounded=0;exitX=0.442;exitY=-0.017;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZHfsRG2pBrrOl4awrow--1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-440" y="340" as="sourcePoint" />
            <mxPoint x="-440" y="281" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="JGtitcx2gDCJm6_vyVpp-2" value="" style="endArrow=none;html=1;rounded=0;exitX=0.442;exitY=-0.017;exitDx=0;exitDy=0;exitPerimeter=0;" parent="ZHfsRG2pBrrOl4awrow--1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-563.5" y="340" as="sourcePoint" />
            <mxPoint x="-580" y="281" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="pT7154b0p45qhmcC0-EJ-0" value="Получаем данные из CDN - если их нет, то обращаемся через всю инфраструктуру" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" parent="ZHfsRG2pBrrOl4awrow--1" vertex="1">
          <mxGeometry x="-520" y="500" width="150" height="40" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
